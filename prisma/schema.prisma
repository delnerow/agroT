// This is your Prisma schema file
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Farm {
  id            String    @id @default(uuid())
  areaHa        Float
  modulosFiscais Int
  uf            String
  tipoSolo      String
  lat           Float?
  lng           Float?
  plants        Plant[]
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

model Plant {
  id                  String    @id @default(uuid())
  nome                String
  tipoPlanta         String
  estagioAtual       String
  areaHa             Float
  custoSafraAnterior Float
  receitaSafraAnterior Float
  tipoSolo           String
  farmId             String
  farm               Farm      @relation(fields: [farmId], references: [id])
  sensorData         SensorData[]
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
}

model SensorData {
  id          String    @id @default(uuid())
  plantId     String
  plant       Plant     @relation(fields: [plantId], references: [id])
  temperature Float
  humidity    Float
  timestamp   DateTime  @default(now())
}